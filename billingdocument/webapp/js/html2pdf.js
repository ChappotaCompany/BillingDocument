(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e(require("jspdf"),require("html2canvas")):typeof define==="function"&&define.amd?define(["jspdf","html2canvas"],e):t.html2pdf=e(t.jsPDF,t.html2canvas)})(this,function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;e=e&&e.hasOwnProperty("default")?e["default"]:e;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};var i=function t(e){var n=typeof e==="undefined"?"undefined":r(e);if(n==="undefined")return"undefined";else if(n==="string"||e instanceof String)return"string";else if(n==="number"||e instanceof Number)return"number";else if(n==="function"||e instanceof Function)return"function";else if(!!e&&e.constructor===Array)return"array";else if(e&&e.nodeType===1)return"element";else if(n==="object")return"object";else return"unknown"};var o=function t(e,r){var n=document.createElement(e);if(r.className)n.className=r.className;if(r.innerHTML){n.innerHTML=r.innerHTML;var i=n.getElementsByTagName("script");for(var o=i.length;o-- >0;null){i[o].parentNode.removeChild(i[o])}}for(var s in r.style){n.style[s]=r.style[s]}return n};var s=function t(e,r){var n=e.nodeType===3?document.createTextNode(e.nodeValue):e.cloneNode(false);for(var i=e.firstChild;i;i=i.nextSibling){if(r===true||i.nodeType!==1||i.nodeName!=="SCRIPT"){n.appendChild(t(i,r))}}if(e.nodeType===1){if(e.nodeName==="CANVAS"){n.width=e.width;n.height=e.height;n.getContext("2d").drawImage(e,0,0)}else if(e.nodeName==="TEXTAREA"||e.nodeName==="SELECT"){n.value=e.value}n.addEventListener("load",function(){n.scrollTop=e.scrollTop;n.scrollLeft=e.scrollLeft},true)}return n};var a=function t(e,r){if(i(e)==="number"){return e*72/96/r}else{var n={};for(var o in e){n[o]=e[o]*72/96/r}return n}};var u=function t(e,r){return Math.floor(e*r/72*96)};var c=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function f(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function p(t,e){return e={exports:{}},t(e,e.exports),e.exports}var l=p(function(t,e){(function(e,r){t.exports=r()})(c,function(){function t(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function e(t){return typeof t==="function"}var r=void 0;if(Array.isArray){r=Array.isArray}else{r=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}var n=r;var i=0;var o=void 0;var s=void 0;var a=function t(e,r){P[i]=e;P[i+1]=r;i+=2;if(i===2){if(s){s(S)}else{j()}}};function u(t){s=t}function p(t){a=t}var l=typeof window!=="undefined"?window:undefined;var h=l||{};var d=h.MutationObserver||h.WebKitMutationObserver;var v=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var g=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return process.nextTick(S)}}function y(){if(typeof o!=="undefined"){return function(){o(S)}}return _()}function b(){var t=0;var e=new d(S);var r=document.createTextNode("");e.observe(r,{characterData:true});return function(){r.data=t=++t%2}}function w(){var t=new MessageChannel;t.port1.onmessage=S;return function(){return t.port2.postMessage(0)}}function _(){var t=setTimeout;return function(){return t(S,1)}}var P=new Array(1e3);function S(){for(var t=0;t<i;t+=2){var e=P[t];var r=P[t+1];e(r);P[t]=undefined;P[t+1]=undefined}i=0}function C(){try{var t=Function("return this")().require("vertx");o=t.runOnLoop||t.runOnContext;return y()}catch(t){return _()}}var j=void 0;if(v){j=m()}else if(d){j=b()}else if(g){j=w()}else if(l===undefined&&typeof f==="function"){j=C()}else{j=_()}function k(t,e){var r=this;var n=new this.constructor(E);if(n[A]===undefined){Z(n)}var i=r._state;if(i){var o=arguments[i-1];a(function(){return K(i,n,o,r._result)})}else{J(r,n,t,e)}return n}function L(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e){return t}var r=new e(E);R(r,t);return r}var A=Math.random().toString(36).substring(2);function E(){}var T=void 0;var x=1;var z=2;var N={error:null};function O(){return new TypeError("You cannot resolve a promise with itself")}function M(){return new TypeError("A promises callback cannot return that same promise.")}function I(t){try{return t.then}catch(t){N.error=t;return N}}function D(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function F(t,e,r){a(function(t){var n=false;var i=D(r,e,function(r){if(n){return}n=true;if(e!==r){R(t,r)}else{W(t,r)}},function(e){if(n){return}n=true;Y(t,e)},"Settle: "+(t._label||" unknown promise"));if(!n&&i){n=true;Y(t,i)}},t)}function q(t,e){if(e._state===x){W(t,e._result)}else if(e._state===z){Y(t,e._result)}else{J(e,undefined,function(e){return R(t,e)},function(e){return Y(t,e)})}}function H(t,r,n){if(r.constructor===t.constructor&&n===k&&r.constructor.resolve===L){q(t,r)}else{if(n===N){Y(t,N.error);N.error=null}else if(n===undefined){W(t,r)}else if(e(n)){F(t,r,n)}else{W(t,r)}}}function R(e,r){if(e===r){Y(e,O())}else if(t(r)){H(e,r,I(r))}else{W(e,r)}}function U(t){if(t._onerror){t._onerror(t._result)}V(t)}function W(t,e){if(t._state!==T){return}t._result=e;t._state=x;if(t._subscribers.length!==0){a(V,t)}}function Y(t,e){if(t._state!==T){return}t._state=z;t._result=e;a(U,t)}function J(t,e,r,n){var i=t._subscribers;var o=i.length;t._onerror=null;i[o]=e;i[o+x]=r;i[o+z]=n;if(o===0&&t._state){a(V,t)}}function V(t){var e=t._subscribers;var r=t._state;if(e.length===0){return}var n=void 0,i=void 0,o=t._result;for(var s=0;s<e.length;s+=3){n=e[s];i=e[s+r];if(n){K(r,n,i,o)}else{i(o)}}t._subscribers.length=0}function B(t,e){try{return t(e)}catch(t){N.error=t;return N}}function K(t,r,n,i){var o=e(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){s=B(n,i);if(s===N){c=true;a=s.error;s.error=null}else{u=true}if(r===s){Y(r,M());return}}else{s=i;u=true}if(r._state!==T){}else if(o&&u){R(r,s)}else if(c){Y(r,a)}else if(t===x){W(r,s)}else if(t===z){Y(r,s)}}function X(t,e){try{e(function e(r){R(t,r)},function e(r){Y(t,r)})}catch(e){Y(t,e)}}var G=0;function Q(){return G++}function Z(t){t[A]=G++;t._state=undefined;t._result=undefined;t._subscribers=[]}function $(){return new Error("Array Methods must be provided an Array")}var tt=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(E);if(!this.promise[A]){Z(this.promise)}if(n(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0){W(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0){W(this.promise,this._result)}}}else{Y(this.promise,$())}}t.prototype._enumerate=function t(e){for(var r=0;this._state===T&&r<e.length;r++){this._eachEntry(e[r],r)}};t.prototype._eachEntry=function t(e,r){var n=this._instanceConstructor;var i=n.resolve;if(i===L){var o=I(e);if(o===k&&e._state!==T){this._settledAt(e._state,r,e._result)}else if(typeof o!=="function"){this._remaining--;this._result[r]=e}else if(n===st){var s=new n(E);H(s,e,o);this._willSettleAt(s,r)}else{this._willSettleAt(new n(function(t){return t(e)}),r)}}else{this._willSettleAt(i(e),r)}};t.prototype._settledAt=function t(e,r,n){var i=this.promise;if(i._state===T){this._remaining--;if(e===z){Y(i,n)}else{this._result[r]=n}}if(this._remaining===0){W(i,this._result)}};t.prototype._willSettleAt=function t(e,r){var n=this;J(e,undefined,function(t){return n._settledAt(x,r,t)},function(t){return n._settledAt(z,r,t)})};return t}();function et(t){return new tt(this,t).promise}function rt(t){var e=this;if(!n(t)){return new e(function(t,e){return e(new TypeError("You must pass an array to race."))})}else{return new e(function(r,n){var i=t.length;for(var o=0;o<i;o++){e.resolve(t[o]).then(r,n)}})}}function nt(t){var e=this;var r=new e(E);Y(r,t);return r}function it(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ot(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var st=function(){function t(e){this[A]=Q();this._result=this._state=undefined;this._subscribers=[];if(E!==e){typeof e!=="function"&&it();this instanceof t?X(this,e):ot()}}t.prototype.catch=function t(e){return this.then(null,e)};t.prototype.finally=function t(r){var n=this;var i=n.constructor;if(e(r)){return n.then(function(t){return i.resolve(r()).then(function(){return t})},function(t){return i.resolve(r()).then(function(){throw t})})}return n.then(r,r)};return t}();st.prototype.then=k;st.all=et;st.race=rt;st.resolve=L;st.reject=nt;st._setScheduler=u;st._setAsap=p;st._asap=a;function at(){var t=void 0;if(typeof c!=="undefined"){t=c}else if(typeof self!=="undefined"){t=self}else{try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if(r==="[object Promise]"&&!e.cast){return}}t.Promise=st}st.polyfill=at;st.Promise=st;return st})});var h=l.Promise;var d=function t(e){var r=n(t.convert(h.resolve()),JSON.parse(JSON.stringify(t.template)));var i=t.convert(h.resolve(),r);i=i.setProgress(1,t,1,[t]);i=i.set(e);return i};d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.convert=function t(e,r){e.__proto__=r||d.prototype;return e};d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:true,html2canvas:{},jsPDF:{}}};d.prototype.from=function t(e,r){function n(t){switch(i(t)){case"string":return"string";case"element":return t.nodeName.toLowerCase==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function t(){r=r||n(e);switch(r){case"string":return this.set({src:o("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})};d.prototype.to=function t(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}};d.prototype.toContainer=function t(){var e=[function t(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function t(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(e).then(function t(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"};var r={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};e.opacity=0;var n=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=o("div",{className:"html2pdf__overlay",style:e});this.prop.container=o("div",{className:"html2pdf__container",style:r});this.prop.container.appendChild(n);this.prop.overlay.appendChild(this.prop.container);document.body.appendChild(this.prop.overlay)})};d.prototype.toCanvas=function t(){var r=[function t(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(r).then(function t(){var r=n({},this.opt.html2canvas);delete r.onrendered;return e(this.prop.container,r)}).then(function t(e){var r=this.opt.html2canvas.onrendered||function(){};r(e);this.prop.canvas=e;document.body.removeChild(this.prop.overlay)})};d.prototype.toImg=function t(){var e=[function t(){return this.prop.canvas||this.toCanvas()}];return this.thenList(e).then(function t(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img");this.prop.img.src=e})};d.prototype.toPdf=function e(){var r=[function t(){return this.prop.canvas||this.toCanvas()}];return this.thenList(r).then(function e(){var r=this.prop.canvas;var n=this.opt;var i=r.height;var o=Math.floor(r.width*this.prop.pageSize.inner.ratio);var s=Math.ceil(i/o);var a=this.prop.pageSize.inner.height;var u=document.createElement("canvas");var c=u.getContext("2d");u.width=r.width;u.height=o;this.prop.pdf=this.prop.pdf||new t(n.jsPDF);for(var f=0;f<s;f++){if(f===s-1&&i%o!==0){u.height=i%o;a=u.height*this.prop.pageSize.inner.width/u.width}var p=u.width;var l=u.height;c.fillStyle="white";c.fillRect(0,0,p,l);c.drawImage(r,0,f*o,p,l,0,0,p,l);if(f)this.prop.pdf.addPage();var h=u.toDataURL("image/"+n.image.type,n.image.quality);this.prop.pdf.addImage(h,n.image.type,n.margin[1],n.margin[0],this.prop.pageSize.inner.width,a)}})};d.prototype.output=function t(e,r,n){n=n||"pdf";if(n.toLowerCase()==="img"||n.toLowerCase()==="image"){return this.outputImg(e,r)}else{return this.outputPdf(e,r)}};d.prototype.outputPdf=function t(e,r){var n=[function t(){return this.prop.pdf||this.toPdf()}];return this.thenList(n).then(function t(){return this.prop.pdf.output(e,r)})};d.prototype.outputImg=function t(e,r){var n=[function t(){return this.prop.img||this.toImg()}];return this.thenList(n).then(function t(){switch(e){case undefined:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})};d.prototype.save=function t(e){var r=[function t(){return this.prop.pdf||this.toPdf()}];return this.thenList(r).set(e?{filename:e}:null).then(function t(){this.prop.pdf.save(this.opt.filename)})};d.prototype.set=function t(e){if(i(e)!=="object"){return this}var r=Object.keys(e||{}).map(function(t){if(t in d.template.prop){return function r(){this.prop[t]=e[t]}}else{switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function t(){this.opt.jsPDF=e.jsPDF;return this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function r(){this.opt[t]=e[t]}}}},this);return this.then(function t(){return this.thenList(r)})};d.prototype.get=function t(e,r){return this.then(function t(){var n=e in d.template.prop?this.prop[e]:this.opt[e];return r?r(n):n})};d.prototype.setMargin=function t(e){return this.then(function t(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(e.length===2){e=[e[0],e[1],e[0],e[1]]}if(e.length===4){break}default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)};d.prototype.setPageSize=function e(r){return this.then(function e(){r=r||t.getPageSize(this.opt.jsPDF);if(!r.hasOwnProperty("inner")){r.inner={width:r.width-this.opt.margin[1]-this.opt.margin[3],height:r.height-this.opt.margin[0]-this.opt.margin[2]};r.inner.px={width:u(r.inner.width,r.k),height:u(r.inner.height,r.k)};r.inner.ratio=r.inner.height/r.inner.width}this.prop.pageSize=r})};d.prototype.setProgress=function t(e,r,n,i){if(e!=null)this.progress.val=e;if(r!=null)this.progress.state=r;if(n!=null)this.progress.n=n;if(i!=null)this.progress.stack=i;this.progress.ratio=this.progress.val/this.progress.state;return this};d.prototype.updateProgress=function t(e,r,n,i){return this.setProgress(e?this.progress.val+e:null,r?r:null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)};d.prototype.then=function t(e,r){var n=this;return this.thenCore(e,r,function t(e,r){n.updateProgress(null,null,1,[e]);return h.prototype.then.call(this,function t(r){n.updateProgress(null,e);return r}).then(e,r).then(function t(e){n.updateProgress(1);return e})})};d.prototype.thenCore=function t(e,r,i){i=i||h.prototype.then;var o=this;if(e){e=e.bind(o)}if(r){r=r.bind(o)}var s=h.toString().indexOf("[native code]")!==-1&&h.name==="Promise";var a=s?o:d.convert(n({},o),h.prototype);var u=i.call(a,e,r);return d.convert(u,o.__proto__)};d.prototype.thenExternal=function t(e,r){return h.prototype.then.call(this,e,r)};d.prototype.thenList=function t(e){var r=this;e.forEach(function t(e){r=r.thenCore(e)});return r};d.prototype["catch"]=function(t){if(t){t=t.bind(this)}var e=h.prototype["catch"].call(this,t);return d.convert(e,this)};d.prototype.catchExternal=function t(e){return h.prototype["catch"].call(this,e)};d.prototype.error=function t(e){return this.then(function t(){throw new Error(e)})};d.prototype.using=d.prototype.set;d.prototype.saveAs=d.prototype.save;d.prototype.export=d.prototype.output;d.prototype.run=d.prototype.then;t.getPageSize=function(t,e,n){if((typeof t==="undefined"?"undefined":r(t))==="object"){var i=t;t=i.orientation;e=i.unit||e;n=i.format||n}e=e||"mm";n=n||"a4";t=(""+(t||"P")).toLowerCase();var o=(""+n).toLowerCase();var s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":var a=1;break;case"mm":var a=72/25.4;break;case"cm":var a=72/2.54;break;case"in":var a=72;break;case"px":var a=72/96;break;case"pc":var a=12;break;case"em":var a=12;break;case"ex":var a=6;break;default:throw"Invalid unit: "+e}if(s.hasOwnProperty(o)){var u=s[o][1]/a;var c=s[o][0]/a}else{try{var u=n[1];var c=n[0]}catch(t){throw new Error("Invalid format: "+n)}}if(t==="p"||t==="portrait"){t="p";if(c>u){var f=c;c=u;u=f}}else if(t==="l"||t==="landscape"){t="l";if(u>c){var f=c;c=u;u=f}}else{throw"Invalid orientation: "+t}var p={width:c,height:u,unit:e,k:a};return p};var v=function t(e,r){var n=new t.Worker(r);if(e){return n.from(e).save()}else{return n}};v.Worker=d;return v});